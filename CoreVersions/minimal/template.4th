( -------------------------------------------------------------------------- )
( Set opcode and architecture type )
20          constant .opcode_word_size
5           constant .opcode_instruction_size
4           constant .opcode_instructions_per_word
2           constant .opcode_sub_word_slot_bits

32          constant DATAPATH
100000000   constant SYSTEMCLOCK
( -------------------------------------------------------------------------- )
( Hardware Base Addresses )
$0000       constant CODE_BASE
$1000       constant RAM_BASE
$1100       constant IRQ_BASE
$1110       constant PIO0_BASE
$1120       constant TIMER0_BASE
$1130       constant ADC0_BASE
$1140       constant BLDC0_BASE

( -------------------------------------------------------------------------- )
RAM_BASE allot ( heap in RAM )

( -------------------------------------------------------------------------- )
0 org addr .__SYSIRQ__ jump ( JUMP to IRQ service routine )
label .Placeholder
[ 16 ] org
label .Placeholder
addr .__CODESTART__ jump   ( JUMP to code )

( -------------------------------------------------------------------------- )
include "lang.4th"

( -------------------------------------------------------------------------- )
( re-Definitions )

( -------------------------------------------------------------------------- )
( Constants )

( -------------------------------------------------------------------------- )
( Variables )

( -------------------------------------------------------------------------- )
( Macros )

( -------------------------------------------------------------------------- )
( Definitions )

( ************************************************************************** )
( -------------------------------------------------------------------------- )
( IRQ code here )
: _IRQ_SERVICE ( -- ) ;
   
( -------------------------------------------------------------------------- )
( ************************************************************************** )
( Main Code Starts Here )
( -------------------------------------------------------------------------- )
label .__CODESTART__
_INIT_FORTH


( -------------------------------------------------------------------------- )
( Spin )
begin
again
   
( -------------------------------------------------------------------------- )
( -------------------------------------------------------------------------- )
( ************************************************************************** )
( -------------------------------------------------------------------------- )
( IRQ event here )
label .__SYSIRQ__
[ IRQ_BASE 0 + ] @
dup 1 and 0<> if _IRQ_SERVICE then
drop reti

